---
layout: post
categories: Redis
description: none
keywords: Redis
---
## **Redis安装、启动**

在Linux系统上安装并启动Redis的步骤（我的Redis安装在/data/component/redis目录下，每一步使用的命令标红加粗）：

- 进入目录，**cd /data/component/redis**
- 下载Redis，**wget http://download.redis.io/releases/redis-3.2.11.tar.gz**，Redis地址为http://download.redis.io/releases/redis-4.0.9.tar.gz
- 解压下载下来的tar包，**tar -zxvf redis-3.2.11.tar.gz**，解压完毕的文件夹名称为redis-3.2.11
- 进入redis-3.2.11，**cd redis-3.2.11**
- 由于我们下载下来的是源文件，因此使用**make**命令对源文件进行一个构建，构建完毕我们会发现src目录下多出了redis-benchmark、redis-check-aof、redis-check-rdb、redis-cli、redis-sentinel、redis-server几个可执行文件，这几个可执行文件后面会说到
- 由于上述几个命令在/data/component/redis/redis-3.2.11/src目录下，为了更方便地使用这几个命令而不需要指定全路径，配置一下环境变量。这里我是以非root用户进行登录的，因此配置用户变量，先执行**cd**命令回到初始目录，再**vi ./.bash_profile**，在path这一行加入**PATH=PATH:PATH:HOME/.local/bin:$HOME/bin:/data/component/redis/redis-3.2.11/src**，使用**:wq**保存并退出
- 使环境变量生效，执行**source ./.bash_profile**
- 使用redis-server即可启动redis，**redis-server /data/component/redis/redis-3.2.11/redis.conf**

不过这个时候我们的启动稍微有点问题，不是后台启动的，即ctrl+c之后Redis就停了：

为了解决这个问题，我们需要修改一下redis.conf，将Redis设置为以守护进程的方式进行启动，打开redis.conf，找到daemonize，将其设置为yes即可：

这个时候先关闭一下再启动，Redis就在后台自动运行了，关闭Redis有两种方式：

- redis-cli shutdown，这是种安全关闭redis的方式，**但这种写法只适用于没有配置密码的场景**，比较不安全，配置密码下一部分会讲
- kill -9 pid，这种方式就是强制关闭，可能会造成数据未保存

重启后，我们可以使用**ps -ef | grep redis**，**netstat -ant | grep 6379**命令来验证Redis已经启动。

**Redis登录授权**

上面我们安装了Redis，但这种方式是非常不安全的，因为没有密码，这样任何连接上Redis服务器的用户都可以对Redis执行操作，所以这一部分我们来讲一下给Redis设置密码。

打开redis.conf，找到"requirepass"部分，打开原本关闭的注释，替换一下自己想要的密码即可：

重启Redis，授权登录有两种做法：

- 连接的时候直接指定密码，**redis-cli -h 127.0.0.1 -p 6379 -a 123456**
- 连接后授权，**redis-cli -h 127.0.0.1 -p 6379**，**auth 123456**

在配置了密码的情况下，没有进行授权，那么对Redis发送的命令，将返回"(error) NOAUTH Authentication required."。