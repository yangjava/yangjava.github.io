---
layout: post
categories: [JUC]
description: none
keywords: JUC
---
# 并发源码队列Queue
Queue用于模拟队列这种数据结构，队列通常是指“先进先出”（FIFO=first in first out）的容器。新元素插入（offer）到队列的尾部，访问元素（poll）操作会返回队列头部的元素。通常，队列不允许随机访问队列中的元素。

## 队列Queue
队列是一种先进先出（FIFO）的数据结构，java中用`Queue`接口来表示队列。

`Queue`接口中定义了6个方法：

```
//接口Queue：
public interface Queue<E> extends Collection<E> {
    //将指定元素插入到队列的尾部（队列满了话，会抛出异常）
    boolean add(E e);

    //将指定元素插入此队列的尾部(队列满了话，会返回false)
    boolean offer(E e);

    /返回取队列头部的元素，并删除该元素(如果队列为空，则抛出异常)
    E remove();

    //返回队列头部的元素，并删除该元素(如果队列为空，则返回null)
    E poll();

    //返回队列头部的元素,不删除该元素(如果队列为空，则抛出异常)
    E element();

    //返回队列头部的元素，不删除该元素(如果队列为空，则返回null)
    E peek();
}
```
每个`Queue`方法都有两种形式：
- 如果操作失败则抛出异常，
- 如果操作失败，则返回特殊值（`null`或`false`，具体取决于操作），接口的常规结构如下表所示。

| 操作类型 | 抛出异常        | 返回特殊值      |
|:-----|:------------|:-----------|
| 插入   | `add(e)`    | `offer(e)` |
| 移除   | `remove()`  | `poll()`   |
| 检查   | `element()` | `peek()`   |

`Queue`从`Collection`继承的`add`方法插入一个元素，除非它违反了队列的容量限制，在这种情况下它会抛出`IllegalStateException`；`offer`方法与`add`不同之处仅在于它通过返回`false`来表示插入元素失败。

`remove`和`poll`方法都移除并返回队列的头部，确切地移除哪个元素是由具体的实现来决定的，仅当队列为空时，`remove`和`poll`方法的行为才有所不同，在这些情况下，`remove`抛出`NoSuchElementException`，而`poll`返回`null`。

`element`和`peek`方法返回队列头部的元素，但不移除，它们之间的差异与`remove`和`poll`的方式完全相同，如果队列为空，则`element`抛出`NoSuchElementException`，而`peek`返回`null`。

队列一般不要插入空元素。


## Queue实现
Java中的Queue的实现有三种方式：

- 阻塞队列
- 非阻塞队列
- 双向队列
































