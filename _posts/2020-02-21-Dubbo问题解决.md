---
layout: post
categories: Dubbo
description: none
keywords: Dubbo
---
# Dubbo问题解决

## WARN No appenders could be found for logger (org.apache.dubbo.common.logger.LoggerFactory)
dubbo2.7.7，显然这是一个静态代码块，一启动及开始加载，首先找系统属性 dubbo.application.logger ，没有就开始加载LoggerAdapter适配器，显然Log4jLoggerAdapter排到了第一位，就用log4j了。
```java
public class LoggerFactory {

    private static final ConcurrentMap<String, FailsafeLogger> LOGGERS = new ConcurrentHashMap<>();
    private static volatile LoggerAdapter LOGGER_ADAPTER;

    // search common-used logging frameworks
    static {
        String logger = System.getProperty("dubbo.application.logger", "");
        switch (logger) {
            case "slf4j":
                setLoggerAdapter(new Slf4jLoggerAdapter());
                break;
            case "jcl":
                setLoggerAdapter(new JclLoggerAdapter());
                break;
            case "log4j":
                setLoggerAdapter(new Log4jLoggerAdapter());
                break;
            case "jdk":
                setLoggerAdapter(new JdkLoggerAdapter());
                break;
            case "log4j2":
                setLoggerAdapter(new Log4j2LoggerAdapter());
                break;
            default:
                List<Class<? extends LoggerAdapter>> candidates = Arrays.asList(
                        Log4jLoggerAdapter.class,
                        Slf4jLoggerAdapter.class,
                        Log4j2LoggerAdapter.class,
                        JclLoggerAdapter.class,
                        JdkLoggerAdapter.class
                );
                for (Class<? extends LoggerAdapter> clazz : candidates) {
                    try {
                        setLoggerAdapter(clazz.newInstance());
                        break;
                    } catch (Throwable ignored) {
                    }
                }
        }
    }
```
解决办法：
- 使用log4j，添加log4j.properties配置文件
- 启动类添加 System.setProperty(“dubbo.application.logger”,“log4j2”) 指定项目中使用的日志框架
- 设置jvm启动参数 -Ddubbo.application.logger=log4j2
