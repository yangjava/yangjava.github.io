---
layout: post
categories: [Neo4j]
description: none
keywords: Neo4j
---
# 使用Neo4j操作图数据
文档型数据库会将数据存储到粗粒度的文档中，而图数据库会将数据存储到多个细粒度的节点中，这些节点之间通过关系建立关联。图数据库中的一个节点通常会对应数据库中的一个概念（concept），它会具备描述节点状态的属性。连接两个节点的关联关系可能也会带有属性。

## Spring Data Neo4j
Spring Data Neo4j提供了很多与Spring Data JPA和Spring Data MongoDB相同的功能，当然所针对的是Neo4j图数据库。它提供了将Java对象映射到节点和关联关系的注解、面向模板的Neo4j访问方式以及Repository实现的自动化生成功能。

## 添加Neo4j依赖
创建项目，pom文件中引入依赖，如下：
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-neo4j</artifactId>
</dependency>
```
## 配置文件
在配置文件中配置Neo4j相关配置，如下：
```properties
# neo4j配置
spring.data.neo4j.uri= bolt://localhost:7687
spring.data.neo4j.username=neo4j
spring.data.neo4j.password=neo4j
```

## 使用注解标注图实体
Neo4j定义了两种类型的实体：节点（node）和关联关系（relationship）。一般来讲，节点反映了应用中的事物，而关联关系定义了这些事物是如何联系在一起的。

Spring Data Neo4j提供了多个注解，它们可以应用在模型类型及其域上，实现Neo4j中的持久化。
@NodeEntity


将Java类型声明为节点实体


@RelationshipEntity


将Java类型声明为关联关系实体


@StartNode


将某个属性声明为关联关系实体的开始节点


@EndNode


将某个属性声明为关联关系实体的结束节点


@Fetch


将实体的属性声明为立即加载


@GraphId


将某个属性设置为实体的ID域（这个域的类型必须是  Long ）


@GraphProperty


明确声明某个属性


@GraphTraversal


声明某个属性会自动提供一个iterable元素，这个元素是图遍历所构建的


@Indexed


声明某个属性应该被索引


@Labels


为@NodeEntity声明标签


@Query


声明某个属性会自动提供一个iterable元素，这个元素是执行给定的Cypher查询所构建的


@QueryResult


声明某个Java或接口能够持有查询的结果


@RelatedTo


通过某个属性，声明当前的  @NodeEntity 与另外一个 @NodeEntity之 间的关联关系


@RelatedToVia


在  @NodeEntity 上声明某个属性，指定其引用该节点所属的某一个 @RelationshipEntity


@RelationshipType


将某个域声明为关联实体类型


@ResultColumn


在带有@QueryResult注解的类型上，将某个属性声明为获取查询结果集中的某个特定列








