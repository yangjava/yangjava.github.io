---
layout: post
categories: [Python]
description: none
keywords: Python
---
# Python基本语法
Python语法简单、优雅，如同阅读英语一般，即使是非科班出身的用户，也能很快理解Python语句的含义。

## 变量
有计算机基础的读者都知道，计算机在工作过程中所产生的数据都是在内存中存储和读取的。内存类似于工厂的仓库，数据作为零件存储在仓库（内存）中不同的地方。仓库那么大，怎样才能快速找到这些零件（数据）呢？我们可以给每个零件贴上“标签”，根据标签名称，就可以找到它们了。 这些标签，就是传说中的“变量”。使用“变量”可以快速定位数据、操作数据。

变量（variable）是程序设计语言中最基本的角色，也就是在程序设计中由编译程序分配的一块具有名称的内存单元，用来存储可变动的数据内容。

Python是面向对象的语言，所有的数据都看成是对象，在变量的处理上也是用对象引用（Object reference）的方法，变量的类型是在赋予初始值时决定的，所以不需要事先声明数据类型。变量的值是使用“=”来赋值的。

声明变量的语法如下：
```python
变量名称 = 变量值
```

比如，存储同学cathy的个人信息：
```python
name = "cathy"                                          # 变量名name，存储姓名
age = 10                                                # 变量名age，存储年龄
height = 138.5                                          # 变量名height，存储身高
is_student = True                                       # 变量名is_student，存储是否是学生的标记
score1 = None                                           # 变量名score1，存储成绩
```

- 变量名包含英文、数字及下划线，但不能以数字开头。后续字符可以搭配其他的大小写英文字母、数字、下画线“_”或中文，不能使用空格符。
- =用来给变量赋值，如变量name的值为cathy。
- 变量在使用前必须赋值。
- #代表行内注释。
- 不能使用Python内建的保留字（或称为关键字）。

## 数据类型
Python的基本数据类型包括整数、浮点数、布尔型和字符串，并提供了int类、float类、bool类和str类这四个内置类与之相对应。这也体现了Python“万物皆对象”的特点。

可以使用type()函数查看一个变量的类型。比如查看同学cathy的各个变量的类型：
```python
type(name)                                              # 字符串：<class 'str'>
type(age)                                               # 整数：<class 'int'>
type(height)                                            # 浮点数：<class 'float'>
type(is_student)                                        # 布尔型：<class 'bool'>
type(score1)                                            # NoneType：<class 'NoneType'>
```
- 注释中的尖括号是执行type()函数后输出的结果。
- 结果中的class意味着Python中一切皆对象，后面会讲到。
- score1的类型是NoneType，不是0，也不是空。很多情况下，API执行失败会返回None。
- 变量不需要声明类型，Python会自动识别。

## 整型
整型数据就是数学上的整数，包括正整数、负整数和零。Python的整型不像C语言和C++语言那样分了长短很多种，几乎不用担心整数超过系统限制。

下面这个计算阶乘的函数，很容易就算出了100的阶乘，其结果位数长达158位。
```python
def factorial(n):
        if n == 0:
            return 1
        return n*factorial(n-1)
factorial(100)      
```
有时为了可读性的需要，我们可以使用不同的数字系统来表示整数值，例如存储数据的内存地址就经常是以十六进制来表示的。整数包含正整数或负整数，除了用十进制（decimal）来表示外，也可以用二进制（binary）、十六进制（hexadecimal）、八进制（octal）来表示，只要分别在数字之前加上0b、0x、0o指定进制系统即可。

## 浮点型
天地茫茫，宇宙无限，星际距离动辄以万亿公里计；然而若专注于微观世界，人类认知已经进入了纳米范围。如果使用定点数表示如此巨大的动态范围，势必耗费大量的存储资源，因此浮点数就应运而生了。所谓浮点数，简单理解就是科学记数法。

浮点数（floating point）数据类型指的是带有小数点的数字，也就是数学上所指的实数（real number）。除了一般小数点的常规表示方法外，也可以使用科学记数法以指数形式表示，例如6e-2，其中6称为有效数，-2称为指数。

浮点型数据既可以表示很大的数，也可以表示很小的数。精度是浮点型数据最重要的指标，也最容易出问题。Python的浮点数为双精度浮点数，使用8字节、共64位表示一个浮点数，其中符号占1位，指数占11位，尾数占52位。

Python的浮点型数据精度很高，足以满足一般需求。如果对精度有要求，decimal模块可以提供更高的计算精度。
```python
>>> 0.1 + 0.2
0.30000000000000004
>>> 0.1 + 0.2 == 0.3 # 判断浮点数是否相等，需要留心此类意外情况
False
```
以上代码演示了因为精度问题导致浮点数计算出现的意外情况。不只Python如此，所有浮点数规范遵从IEEE754二进制浮点数算术标准（ANSI/IEEE Std 754-1985）的编程语言，如C语言，都会如此。如果想在C语言环境中验证，需要使用double类型。

- 使用decimal模块进行小数运算
decimal模块是Python标准模块库，使用它之前需要先用import指令导入这个模块，而后才能使用。正确导入这个模块之后，我们就可以使用decimal.Decimal类来存储精确的数字，如果参数为非整数，就必须以字符串形式传入参数，例如：
```python
import decimal
num = decimal.Decimal("0.1") + decimal.Decimal("0.2")
```
这样运算后得到的结果就会是0.3。

- 使用round()函数强制小数点的指定位数
`round(x[,n])`是内建函数，会返回参数x最接近的数值，n用来指定返回的小数点位数，例如：
```python
num =  0.1 + 0.2
print( round(num, 1) )
```
上面的程序语句是将变量num取到小数点后1位，因此会得到0.3的结果。

## 布尔型
布尔数据类型（bool）是一种表示逻辑的数据类型，是int的子类，只有真值（True）与假值（False）。布尔数据类型通常用于程序流程控制中的逻辑判断。Python语言定义了两个常量True和False，用来表示布尔型的真和假。True表示真、非空、非零等概念，False表示假、空、零等概念。

```python
>>> bool(0)
False
>>> bool(None)
False
>>> bool('')
False
>>> bool([])
False
>>> bool(5)
True
>>> bool('x')
True
>>> bool([False])
True
```

## 字符串
字符串是Python语言的处理对象之一。Python将单引号（'）、双引号（"）、三引号（'''或"""）前后封闭起来的字符集视为字符串对象，并提供了一系列处理方法。字符串里可以包含数字、字母和符号。

下面都是Python合法的字符串的例子。

```python
>>> '人生苦短，我用Python'
'人生苦短，我用Python'
>>> "人生苦短，我用Python"
'人生苦短，我用Python'
>>> '''人生苦短，我用Python'''
'人生苦短，我用Python'
>>> """人生苦短，我用Python"""
'人生苦短，我用Python'
```

在Python语言中，必须是相同的数据类型才能直接进行运算，例如字符串与整数不能直接相加，必须将字符串转换为整数，如果参加运算的都是数值类型，那么Python会自动进行类型转换，而不需要指定强制转换类型，例如：
```python
num = 5 + 0.3   #结果num=5.3 (浮点数)
```

Python会自动将整数转换为浮点数再进行运算。另外，布尔值也可以当成数值来运算，True代表1，False代表0，例如：
```python
num = 5 + True  #结果num=6 (整数)
```
如果想把字符串转换为布尔值，可以通过bool函数来进行转换。

## 常数
常数是指程序在整个执行过程中不能被改变的数值。例如整数常数：45、-36、10005、0等，或者浮点数常数：0.56、-0.003、1.234E2，等等。常数拥有固定的数据类型和数值。变量（variable）与常数（constant）最大的差异在于变量的内容会随着程序的执行而改变，常数则固定不变。

Python的常数是指字面常数（literal），也就是该常数字面上的意义，例如12就代表整数12。所谓字面常数，就是直接写进Python程序的数值。字面常数如果按数据类型来区分，会有不同的分类，例如：1234、65、963、0都是整数字面常数（integer literal）。而带小数点的数值则为浮点数类型（floating-point type）的字面常数，例如3.14、0.8467、744.084。至于以单引号（'）或双引号（"）引起来的字符都是字符串字面常数（string literal），例如"Hello World"、"0932545212"都是字符串字面常数。

