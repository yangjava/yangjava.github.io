---
layout: post
categories: [MongoDB]
description: none
keywords: MongoDB
---
# MongoDB数据库操作
MongoDB 是一个基于分布式文件存储的数据库。由 C++ 语言编写。旨在为 WEB 应用提供可扩展的高性能数据存储解决方案。

## 数据库CRUD
在进行增查改删操作之前，先了解下常用的 shell 操作：
- db 显示当前所在数据库，默认为 test
- show dbs 列出可用数据库
- show tables show collections 列出数据库中可用集合
- use <database> 用于切换数据库

mongoDB 预设有两个数据库，admin 和 local，admin 用来存放系统数据，local 用来存放该实例数据，在副本集中，一个实例的 local 数据库对于其它实例是不可见的。使用 use 命令切换数据库：

## 创建数据库
MongoDB 创建数据库的语法格式如下：
```text
use DATABASE_NAME
```
如果数据库不存在，则创建数据库，否则切换到指定数据库。

如果你想查看所有数据库，可以使用 show dbs 命令：
```text
show dbs
```
注意: 在 MongoDB 中，集合只有在内容插入后才会创建! 就是说，创建集合(数据表)后要再插入一个文档(记录)，集合才会真正创建。

## 删除数据库
MongoDB 删除数据库的语法格式如下：
```text
db.dropDatabase()
```
删除当前数据库，默认为 test，你可以使用 db 命令查看当前数据库名。

## 创建集合
MongoDB 中使用 createCollection() 方法来创建集合。
```text
db.createCollection(name, options)
```
参数说明：
- name: 要创建的集合名称
- options: 可选参数, 指定有关内存大小及索引的选项

创建固定集合 mycol，整个集合空间大小 6142800 B, 文档最大个数为 10000 个。
```text
db.createCollection("mycol", { capped : true, autoIndexId : true, size : 
   6142800, max : 10000 } )
```


如果要查看已有集合，可以使用 show collections 或 show tables 命令：
```text
show collections
```
在 MongoDB 中，你不需要创建集合。当你插入一些文档时，MongoDB 会自动创建集合。
```text
db.mycol2.insert({"name" : "MongoDB教程"})
```

## 删除集合
MongoDB 中使用 drop() 方法来删除集合。
```text
db.collection.drop()
```
如果成功删除选定集合，则 drop() 方法返回 true，否则返回 false。