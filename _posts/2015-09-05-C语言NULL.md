---
layout: post
categories: [C]
description: none
keywords: C
---
# C语言NULL
在C语言中，如果一个指针不指向任何数据，我们就称之为空指针，用NULL表示。

## C语言NULL
在 C 语言中，NULL 是一个预定义的宏，通常被定义为 (void *)0 或者是一个整数值0。一般定义在 stdio.h 或 stddef.h 头文件中，形如：
```
#define NULL ((void *)0)
```

那么我们来看看什么是空指针？
```
If a null pointer constant is converted to a pointer type, the resulting pointer, called a null pointer, is guaranteed to compare unequal to a pointer to any object or function.
```

NULL 主要用来表示一个指针变量没有指向任何有效地址，也就是空指针（null pointer）。空指针可以用于条件语句的判断，比如检查一个指针是否已经被赋值：
```
int *ptr = NULL;
if (ptr == NULL) {
    /* 指针ptr未被赋值,是一个空指针 */
}
```

在实际开发中，程序员可以使用 NULL 作为空指针的初始化值，这样可以避免指针变量在未初始化时不确定的状态。同时，C 语言中的很多函数和库也使用 NULL 来表示一些特定的状态，比如文件结尾、查询失败等。

通常情况下，将未初始化的指针设置为 NULL，可以避免指针在使用之前指向一个未知的内存位置，从而避免出现访问非法内存地址的情况。

在使用指针之前，可以通过检查指针是否为 NULL，来避免出现悬空指针错误，例如在用malloc()函数动态创建数组时，可以通过返回值是不是NULL来判断空间分配是否成功：

```
#include <stdio.h>
#include <stdlib.h>

int main() {
    int *ptr = NULL;
    int size = 10;

    ptr = (int*)malloc(size * sizeof(int));
    if (ptr == NULL) {
        printf("malloc failed!\n");
        return 1;
    }

    free(ptr);

    return 0;
}
```