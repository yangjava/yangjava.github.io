---
layout: post
categories: [Hadoop]
description: none
keywords: Hadoop
---
# Hadoop安装与配置
Hadoop 运行模式包括：本地模式、伪分布式模式以及完全分布式模式。

## 运行模式
本地模式（standalone mode）： 单机运行，仅 1 个机器运行1个java进程，主要用于调试

伪分布式模式（Pseudo-Distributed mode）： 也是单机运行，但是具备 Hadoop 集群的所有功能，一台服务器模拟一个分布式的环境，主要用于调试

完全分布式模式/集群模式（Cluster mode）： 多台服务器组成分布式环境，生产环境使用

## Docker安装Hadoop
- 获取Docker镜像
```
docker pull sequenceiq/hadoop-docker:2.7.0
```
- 运行Hadoop
```
docker run -i -t -p 50070:50070 -p 9000:9000 -p 8088:8088 -p 8040:8040 -p 8042:8042  -p 49707:49707  -p 50010:50010  -p 50075:50075  -p 50090:50090 sequenceiq/hadoop-docker:2.6.0 /etc/bootstrap.sh -bash
```
-p 9000:9000 -p 50070:50070

docker run -d --name myhadoop0 -p 50070:50070 -p 9000:9000 -p 8088:8088 -p 8040:8040 -p 8042:8042 -p 49707:49707 -p 50010:50010 -p 50075:50075 -p 50090:50090 sequenceiq/hadoop-docker:2.7.0 /etc/bootstrap.sh -bash
docker run -it sequenceiq/hadoop-docker:2.7.0 /etc/bootstrap.sh -bash --privileged=true


## Windows环境下搭建安装Hadoop详解
下载Hadoop发布的稳定包：https://archive.apache.org/dist/hadoop/common/

Hadoop在Windows下完整运行需要Windows组件支持，从 https://github.com/steveloughran/winutils 这里下载一个，下载完成后，解压得到若干版本的winutils

然后把上面的bin文件一股脑全部复制到第1步中解压后的hadoop-2.8.3\bin文件夹下面，覆盖原先的bin目录文件下所有文件。

## Hadoop配置文件详解
- hadoop-env.sh
文件中设置的是 Hadoop 运行时需要的环境变量。JAVA_HOME 是必须设置的，即使我们当前的系统中设置了 JAVA_HOME，它也是不认识的，因为 Hadoop 即使是在本机上执行，它也是把当前的执行环境当成远程服务器。

- core-site.xml
Hadoop 的核心配置文件，有默认的配置项 core-default.xml。
core-default.xml 与 core-site.xml 的功能是一样的，如果在 core-site.xml 里没有配置的属性，则会自动会获取 core-default.xml 里的相同属性的值。

- hdfs-site.xml
HDFS 的核心配置文件，主要配置 HDFS 相关参数，有默认的配置项 hdfs-default.xml。
hdfs-default.xml 与 hdfs-site.xml 的功能是一样的，如果在 hdfs-site.xml 里没有配置的属性，则会自动会获取 hdfs-default.xml 里的相同属性的值。

- mapred-site.xml
MapReduce 的核心配置文件，Hadoop 默认只有一个模板文件 mapred-site.xml.template，需要使用该文件复制出来一份 mapred-site.xml 文件

- yarn-site.xml
YARN 的核心配置文件

- workers
workers文件里面记录的是集群主机名。一般有以下两种作用：
配合一键启动脚本如 start-dfs.sh、stop-yarn.sh 用来进行集群启动。这时候 slaves 文件里面的主机标记的就是从节点角色所在的机器
可以配合 hdfs-site.xml 里面 dfs.hosts 属性形成一种白名单机制。dfs.hosts 指定一个文件，其中包含允许连接到 NameNode 的主机列表。必须指定文件的完整路径名，那么所有在 workers中 的主机才可以加入的集群中。如果值为空，则允许所有主机。
