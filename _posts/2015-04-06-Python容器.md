---
layout: post
categories: [Python]
description: none
keywords: Python
---
# Python容器
容器可以用来盛放一组相关联的数据，并对数据进行统一的功能操作。Python语言内置了列表(list)、字典(dict)、元组(tuple)、集合(list)和字符串(list)等多种数据结构，每种数据结构都封装成为一个类。这些结构和其他语言中的类似结构本质上是相同的，但Python容器更简单、更强大。

Python语言之所以能够风行于世，与其多个便捷高效的内置类，尤其是列表，有很大关系。一旦习惯了Python语言的列表，再去用C语言或C++语言写数组的时候，感觉像是回到了刀耕火种的原始社会（当然前提是不考虑运行效率，只考虑开发效率）。

## 列表（list）
列表（list）是元素的有序集合，列表的元素可以是Python语言支持的任意类型。初学者一般习惯用一对方括号（[ ]）来创建列表，标准的写法是用list( )来实例化list类。
列表的方法有很多，可以实现列表末尾追加元素、指定位置插入元素、删除指定元素或指定索引位置的元素、返回元素索引、排序等操作。此外，列表的索引、切片也非常灵活，很多操作都能给人惊喜。

现将同学cathy的个人信息统一放到列表中，代码如下：
```python
cathy = ["cathy",10,138.5,True,None]    #cathy的个人信息 
score = [90,100,98,95]                  #各科成绩
name = list("cathy")                    #利用list()函数初始化一个列表
print(name)                             #输出结果：['c', 'a', 't', 'h', 'y']
a = list()                              # 创建一个空列表，可以传入列表、元组、字符串等迭代对象
```
- 列表内的元素用方括号（[ ]）包裹。
- 列表内不同元素之间使用逗号（,）分隔。
- 列表内可以包含任何数据类型，也可以包含另一个列表。
- 可以使用list()函数生成一个列表。

可以使用列表自带的方法实现列表的访问、增加、删除和倒序等操作。仔细阅读以下代码及注释。
```python
cathy = ["cathy",10,138.5,True,None]    #cathy的个人信息
a = cathy[0]            #下标法获取第1个元素（姓名）：cathy
b = cathy[1:3]                  #使用切片获取下标1到下标3之前的子序列：[10, 138.5]
c = cathy[1:-2]                 #切片下标也可以倒着数，-1对应最后一个元素：[10, 138.5]
d = cathy[:3]                   #获取从开始到下标3之前的子序列：['cathy', 10, 138.5]
e = cathy[2:]                   #获取下标2开始到结尾的子序列:[138.5, True, None]
cathy[2] = 140.2                #将第3个元素修改为140.2
10 in cathy             #判断10是否在列表中，True
cathy.append(28)        #将体重添加到列表末尾
print(cathy)                    #['cathy', 10, 140.2, True, None, 28]
cathy.insert(2,"中国")    #将国籍插入到第2个元素之后
print(cathy)                    #['cathy', 10, '中国', 140.2, True, None, 28]
cathy.pop()             #默认删除最后一个元素
print(cathy)                    #['cathy', 10, '中国', 140.2, True, None]
cathy.remove(10)        #删除第1个符合条件的元素
print(cathy)                    #['cathy', '中国', 140.2, True, None]
cathy.reverse()                 #倒序
print(cathy)                    #[None, True, 140.2, '中国', 'cathy']
cathy.extend([4,5,7,4,9])       # 列表后接列表[4,5,7,4,9]
```
现在要使用列表存储另一个同学terry的信息，已知除了姓名以外，其他的信息跟cathy一样。通过以下操作就可以得到同学terry的列表。
```python
#cathy的个人信息
cathy_list = ["cathy",10,138.5,True,None]
terry_list = cathy_list #将cathy_list赋给变量terry_list
terry_list[0] = "terry" #修改terry的姓名
print(terry_list)               #打印terry信息：['terry', 10, 138.5, True, None]
print(cathy_list)               #打印cathy信息：['terry', 10, 138.5, True, None]
```
和大家的预期不同的是，cathy_list中的姓名也变成terry了，但是我们并未修改cathy_list的姓名，这是什么原因呢？
原来在执行terry_list=cathy_list时，程序并不会将cathy_list的值复制一遍，然后赋给terry_list，而是简单地为cathy_list的值即`["cathy",10,138.5,True,None]`建立了一个引用，相当于cathy_list和terry_list都是指向同一个值的指针，所以当terry_list中的值改变后，cathy_list的值也会跟着变。可以通过id()函数来获取变量的地址。
实现代码如下：
```python
print(id(cathy_list))                           #获取cathy_list的地址：2011809417032
print(id(terry_list))                                   #获取terry_list的地址：2011809417032
```
结果显示，cathy_list和terry_list这两个变量均指向同一个地址。如何解决这个问题呢？可以使用copy()函数将值复制一份，再赋给terry_list，实现代码如下：
```python
#terry_list = cathy_list                      #删除该条语句
terry_list = cathy_list.copy()          #将值复制一份赋给变量terry_list
```

## 字典（dict）
字典（dict）也是Python语言最强大的工具之一。字典的本质是无序的键值对，字典类封装了很多有用的方法，用起来非常顺手。

将同学cathy各科的成绩保存于列表score中，实现代码如下：
```python
score = [90,100,98,95]                          #成绩
```
如果想要获取cathy的语文成绩，如何做到呢？除非事先将每门课的位置都做了记录，否则无论如何是获取不到语文成绩的。当需要对数据做明确的标注，以供别人理解和处理时，使用列表就不太方便了，这时字典就派上用场了。

字典是一种非常常见的“键-值”（key-value）映射结构，它为每一个元素分配了一个唯一的key，你无须关心位置，通过key就可以获取对应的值。下面来看一下使用字典保存的成绩：
```python
score1 = {"math":90,"chinese":100,"english":98,"PE":95}         #成绩字典
print(score1["chinese"])
```
- 字典内的元素用大括号（{}）包裹。
- 使用key:value的形式存储一个元素，如"math":90，字符串math是分数90的key。
- 字典内不同键值对之间采用逗号（,）分隔。
- 字典是无序的，字典中的元素是通过key来访问的，如`score1["chinese"]`得到语文成绩。
也可以使用dict()函数初始化字典，实现代码如下：
```python
score2 = dict(math=90,chinese=100,english=98,PE=95)
print(score1["chinese"])                        #根据key获取语文成绩：100
if "PE" in score1:                              #判断字典中是否包含"PE"的key
  print(score1["PE"])                           #得到体育成绩：95
#获取所有的key并保存于列表中，输出结果：['math', 'chinese', 'english', 'PE']
print(score1.keys())
#获取所有的value并保存于列表中，输出结果：[90, 100, 98, 95]
print(score1.values())
#获取key和value对转化为列表
#输出结果：[('math', 90), ('chinese', 100), ('english', 98), ('PE', 95)]
print(score1.items())
```

## 元组
元组（tuple）可以理解为限制版的列表，也是元素的有序集合，但这个集合一旦创建，就不允许增加、删除和修改元素。
通常，元组用于表示特定的概念，如坐标、矩形区域等。

```python
sex1 = ("male","female")                        #使用括号生成并初始化元组
sex2 = tuple(["male","female"])                 #从列表初始化
sex3 = ("male",)                                        #只有一个元素时，后面也要加逗号
sex4 = "male","female"                                  #默认是元组类型("male","female")
```
- 元组中元素的访问方法和列表一样，都可以使用下标和切片。
- 圆括号（( )）表示元组，方括号（[ ]）代表列表，大括号（{ }）代表字典。
- 初始化只包含一个元素的元组时，也必须在元素后加上逗号，如sex3。
- 直接用逗号分隔多个元素的赋值默认是元组，如变量sex4。
- 元组内的数据一旦被初始化，就不能更改。

## 集合
集合（set）有两个特点，一是集合内元素具有唯一性，二是集合内元素无序排列。在学习的初级阶段使用集合的机会不多，但有一个经常使用的经典用法，它最能体现集合的价值，那就是去除列表内重复的元素。
```shell
>>> a = set()
>>> a.update({'x','y','z'})
>>> a
{'x', 'y', 'z'}
>>> a.remove('z')
>>> a
{'x', 'y'}
>>> a.add('w')
>>> a
{'x', 'y', 'w'}
>>> a = {'A','D','B'}
>>> b = {'D','E','C'}
>>> a.difference(b) # 返回a有b没有的元素集合
{'B', 'A'}
>>> a - b # 记不住的话，这样写也行
{'B', 'A'}
>>> a.union(b) # 返回a和b的并集。虽然差集可以用a-b替代，但并集不能用a+b表示
{'C', 'B', 'A', 'D', 'E'}
>>> a.intersection(b) # 返回a和b重复元素的集合
{'D'}
>>> a.symmetric_difference(b) # 返回a和b非重复元素的集合
{'C', 'B', 'A', 'E'}
>>> list(set([1,2,5,2,3,4,5,'x',4,'x'])) # 去除数组 [1,2,5,2,3,4,5,'x',4,'x'] 中的重复元素
[1, 2, 3, 4, 5, 'x']
```

## 字符串
Python语言的文本处理功能非常强大，仅仅依赖字符串类的方法，就可以实现几乎所有的字符串操作。字符串对象还可以像列表那样索引和切片，但无法改变字符串对象的内容，这有点类似元组不可以增加、删除和修改元素。
```shell
>>> str(3.14) # 数字转字符串
'3.14'
>>> str(['a',1]) # 列表转字符串
"['a', 1]"
>>> str({'a':1, 'b':2}) # 字典转字符串
"{'a': 1, 'b': 2}"
>>> s = 'python真好用，very good.'
>>> s[1:-1] # 掐头去尾
'ython真好用，very good'
>>> s[::2] # 隔一个取一个元素
'pto真用 vr od'
>>> s[::-1] # 反转字符串
'.doog yrev，用好真nohtyp'
>>> s.upper() # 全部大写
'PYTHON真好用，VERY GOOD.'
>>> s.lower() # 全部小写
'python真好用，very good.'
>>> s.capitalize() # 字符串首字母大写
'Python真好用，very good.'
>>> s.title()
'Python真好用，Very Good.' # 单词首字母大写
>>> s.startswith('python') # 判断是否以指定的子串开头
True
>>> s.endswith('good.') # 判断是否以指定的子串结尾
True
>>> s.find('very') # 首次出现的索引，未找到则返回-1
10
>>> s.split() # 分割字符串，还可以指定分隔符
['python真好用，very', 'good.']
>>> s.replace('very', 'veryvery') # 替换子串
'python真好用，veryvery good.'
>>> '2345.6'.isdigit() # 判断是否是数字
False
>>> 'adS12K56'.isalpha() # 判断是否是字母
False
>>> 'adS12K56'.isalnum() # 判断是否是字母和数字
True
>>> '\t adS12K56 \n'.strip() # 去除首尾空格（包括制表位和换行符）
'adS12K56'
```

