---
layout: post
categories: [Spring]
description: none
keywords: Spring
---
# Spring扩展点
spring容器启动时，会先解析BeanDefinition，然后生成BeanDefinition信息；再实例化生成bean对象，在这个过程中spring为我们提供了很多扩展点，来实现定制功能。

## 

### 解析BeanDefinition阶段
- BeanFactoryPostProcessor：bean工厂后置处理器，可以用来注册bean定义
- BeanDefinitionRegistryPostProcessor: 可以用来注册、移除、修改bean定义
- ImportBeanDefinitionRegistrar：通过@Import注解导入，可以用来注册bean定义

### Bean的生命周期阶段
- BeanPostProcessor：在创建Bean的过程中可以对实例化前后、属性赋值、初始化前后进行干预
- Aware接口：比如BeanNameAware， BeanFactoryAware等等，在bean实例化过程中调用
- FactoryBean：自定义一个特殊工厂bean对象
- InitializingBean：在bean初始化时调用

### Spring容器启动完成阶段
- SmartInitializingSingleton：在容器启动完成时调用（getBean创建完bean时调用）
- LifecycleProcessor：在容器完成刷新时调用
- ApplicationContextEvent：发布容器刷新事件

### 推荐使用的扩展点
- ImportBeanDefinitionRegistrar：通过@Import注解导入来注册bean定义
- @PostConstruct：注解定义初始化方法
- FactoryBean：将具体相同逻辑的类通过工厂bean来创建代理对象
- ApplicationContextEvent：容器刷新事件
- LifecycleProcessor：容器生命周期处理类

### 扩展点执行顺序及示例代码
- 解析BeanDefinition阶段：HelloService，HelloService1通过bean工厂后置处理器进行注册BeanDefinition
- bean生命周期阶段：bean的后置处理器，加了判断，只有beanName是demoService时才处理
- 容器启动完成阶段：bean创建完成后会调用容器启动后的扩展点











