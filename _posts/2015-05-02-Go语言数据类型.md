---
layout: post
categories: [Go]
description: none
keywords: Go
---
# Go语言数据类型

## 数据类型
Go语言中有丰富的数据类型，除了基本的整型、浮点型、布尔型、字符串外，还有切片、结构体、函数、map、通道（channel）等。Go语言的基本类型和其他语言大同小异，切片类型有着指针的便利性，但比指针更为安全，很多高级语言都配有切片进行安全和高效率的内存操作。
结构体是Go语言基础的复杂类型之一。 函数也是Go语言的一种数据类型，可以对函数类型的变量进行赋值和获取。
map和切片是开发中常见的数据容器类型。 通道与并发息息相关。

## 整型
整型分为以下两个大类。
- 按长度分为：`int8`、`int16`、`int32`、`int64`
- 还有对应的无符号整型：`uint8`、`uint16`、`uint32`、`uint64`。
其中，uint8就是我们熟知的byte型，int16对应C语言中的short型，int64对应C语言中的long型。

- 自动匹配平台的int和uint
Go语言也有自动匹配特定平台整型长度的类型——int和uint。
可以跨平台的编程语言可以运行在多种平台上。平台的字节长度是有差异的。64位平台现今已经较为普及，但8位、16位、32位的操作系统依旧存在。16位平台上依然可以使用64位的变量，但运行性能和内存性能上较差。同理，在64位平台上大量使用8位、16位等与平台位数不等长的变量时，编译器也是尽量将内存对齐以获得最好的性能。
不能正确匹配平台字节长度的程序就类似于用轿车运一头牛和用一辆卡车运送一头牛的情形一样。
在使用int和uint类型时，不能假定它是32位或64位的整型，而是考虑int和uint可能在不同平台上的差异。

- 哪些情况下使用int和uint
逻辑对整型范围没有特殊需求。例如，对象的长度使用内建len()函数返回，这个长度可以根据不同平台的字节长度进行变化。实际使用中，切片或map的元素数量等都可以用int来表示。

反之，在二进制传输、读写文件的结构描述时，为了保持文件的结构不会受到不同编译目标平台字节长度的影响，不要使用int和uint。

## 浮点型
Go语言支持两种浮点型数：`float32`和`float64`。这两种浮点型数据格式遵循IEEE 754标准。
- float32的浮点数的最大范围约为3.4e38，可以使用常量定义：math.MaxFloat32。
- float64的浮点数的最大范围约为1.8e308，可以使用一个常量定义：math.MaxFloat64。
打印浮点数时，可以使用fmt包配合动词“%f”，代码如下：
```go
01        package main
02        
03        import (
04                "fmt"
05                "math"
06        )
07        
08        func main() {
09        
10                fmt.Printf("%f\n", math.Pi)
11        
12                fmt.Printf("%.2f\n", math.Pi)
13        }
```
代码说明如下：
- 第10行，按默认宽度和精度输出整型。
- 第12行，按默认宽度，2位精度输出（小数点后的位数）。
代码输出如下：
```go
3.141593
3.14
```

## 布尔型
布尔型数据在Go语言中以bool类型进行声明，布尔型数据只有true（真）和false（假）两个值。
Go语言中不允许将整型强制转换为布尔型，代码如下：
```go
var n bool

fmt.Println(int(n) * 2)
```
编译错误，输出如下：
```go
cannot convert n (type bool) to type int
```
布尔型无法参与数值运算，也无法与其他类型进行转换。
