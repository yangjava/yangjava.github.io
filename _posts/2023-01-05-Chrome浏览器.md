---
layout: post
categories: [Chrome]
description: none
keywords: Chrome
---
# Chrome浏览器


## 开发者工具
Chrome 开发者工具 F12 是前端开发、测试人员的利器，使用开发者工具可以非常方便地查看页面元素、源文件、控制台、网络等等。

## Network
其中的 Network 类似与 fiddler 抓包工具，能够获取请求、响应、缓存等等内容。

### 界面总览
- 记录请求
开启按钮时记录所有请求，关闭按钮时不会记录
- 清除请求
清除按钮，清除所有记录的请求
- 过滤请求
过滤器，能够自定义筛选条件，也可以选择预定义的过滤方式

ALL：显示所有请求
XHR：显示AJAX异步请求
JS：显示js文件
CSS：显示css文件
Img：显示图片
Media：显示媒体文件，音频、视频等
Font：显示Web字体
Doc：显示html
WS：显示websocket请求
Other：显示其他请求

- 是否进行缓存
当打开开发者工具时生效，打开这个开关，则页面资源不会存入缓存，可以从 Status 栏的状态码看文件请求状态。
- 弱网设置
设置模拟限速。
- 网络设置
caching：缓存设置

Network throttling ：弱网设置

User agent：属于 http 请求头一部分。表示所用浏览器类型及版本、操作系统及版本、浏览器内核、等信息的标识。

Accepted Content-Encodings：服务端压缩格式

- 右键界面
Open in new tab：在新的标签中打开链接

Clear browser cache：清空浏览器缓存

Clear browser cookies：清空浏览器cookies

Copy：复制

Block request URL：拦截当前请求url

Block request domian：拦截当前域名下所有请求

Replay XHR：重新请求AJAX

Sort By：排序请求

Header Options：显示请求头选项

Save all as HAR with content：保存所有请求为.har文件

- copy
Copy Link Address：复制资源url到系统剪贴板

Copy Response：复制HTTP响应

Copy stack trace：复制堆栈信息

Copy as PowerShell：复制请求PwoerShell代码

Copy as fetch：复制请求fetch代码

Copy as Node.js fetch：复制请求Node.js fetch代码

Copy as cUrl（cmd）：复制请求cUrl 命令代码

Copy as cUrl（bash）：复制请求cUrl 命令代码

Copy all as PowerShell：复制所有请求PwoerShell代码

Copy all as fetch：复制所有请求fetch代码

Copy all as Node.js fetch：复制所有请求Node.js fetch代码

Copy all as cUrl（cmd）：复制所有请求cUrl 命令代码

Copy all as cUrl（bash）：复制所有请求cUrl 命令代码

Copy All as HAR：复制所有请求HAR文件

## chrome浏览器中的Timing详解

### Queueing
因为有“队头阻塞”，浏览器对每个域名最多开 6 个并发连接（HTTP/1.1），当页面里链接很多的时候就必须排队等待（Queued、Queueing）。此参数表示从添加到待处理队列，到实际开始处理的时间间隔。

### Stalled（阻塞）
浏览器得到要发出这个请求的指令，到请求可以发出的等待时间。一般是代理协商、以及等待可复用的TCP连接释放的时间，不包括DNS查询、建立TCP连接等时间等。浏览器对同一个主机域名的并发连接数有限制，因此如果当前的连接数已经超过上限，那么其余请求就会被阻塞，等待新的可用连接，此外脚本也会阻塞其他组件的下载。

优化措施：
1、将资源合理分布到多台主机上，可以提高并发数，但是增加并行下载数量也会增大开销，这取决于带宽和CPU速度，过多的并行下载会降低性能；
2、脚本置于页面底部；

### DNS Lookup
请求某域名下的资源，浏览器需要先通过DNS解析器得到该域名服务器的IP地址。在DNS查找完成之前，浏览器不能从主机名那里下载到任何东西。DNS查询的时间，当本地DNS缓存没有的时候，这个时间可能是有一段长度的，但是比如你一旦在host中设置了DNS，或者第二次访问，由于浏览器的DNS缓存还在，这个时间就为0了。

优化措施：
1、利用DNS缓存（设置TTL时间）；
2、利用Connection:keep-alive特性建立持久连接，可以在当前连接上进行多个请求，无需再进行域名解析；

### Initial connection

建立TCP连接的时间，就相当于客户端从发请求开始到TCP握手结束这一段，包括DNS查询+Proxy时间+TCP握手时间。

SSL（包含于HTTPS连接中）

http是超文本传输协议，以明文方式发送内容，不提供任何方式的数据加密，如果被不法分子截取浏览器和服务器之间的传输报文，会获取其中的信息。

https 是安全套接字层超文本传输协议，就是在HTTP的基础上加入了SSL协议，SSL依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。

因此建立HTTPS连接的时间相当于三次握手的时间+SSL时间。

Request sent（发送请求）

发送HTTP请求的时间（从第一个字节发出前到最后一个字节发出后的时间）

优化措施：
1、减少HTTP请求，可以使用CSS Sprites、内联图片、合并脚本和样式表等；
2、对不常变化的组件添加长久的Expires头（相当于设置久远的过期时间），在后续的页面浏览中可以避免不必要的HTTP请求；

Waiting(TTFB)

请求发出后，到收到响应的第一个字节所花费的时间(Time To First Byte)，发送请求完毕到接收请求开始的时间。通常是耗费时间最长的。从发送请求到收到服务器响应的第一字节之间的时间，受到线路、服务器距离等因素的影响。


注意：网页重定向越多，TTFB越高，所以要减少重定向

优化措施：使用CDN，将用户的访问指向距离最近的工作正常的缓存服务器上，由缓存服务器直接响应用户请求，提高响应速度；

Content Download（下载）

收到响应的第一个字节，到接受完最后一个字节的时间，就是下载时间。

优化措施：
1、通过条件Get请求，对比If-Modified-Since和Last-Modified时间，确定是否使用缓存中的组件，服务器会返回“304 Not Modified”状态码，减小响应的大小；
2、移除重复脚本，精简和压缩代码，如借助自动化构建工具grunt、gulp等；
3、压缩响应内容，服务器端启用gzip压缩，可以减少下载时间；